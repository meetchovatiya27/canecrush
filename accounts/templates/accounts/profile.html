{% extends 'base.html' %}
{% load static %}
{% block title %}Profile | CaneCrush{% endblock %}

{% block content %}
<div class="container">

    <!-- PROFILE UPDATE FORM -->
    <form method="post">
        {% csrf_token %}

        {% if form.errors %}
        <div class="alert alert-danger">
            {% for field in form %}
                {% for error in field.errors %}
                    <p>{{ error }}</p>
                {% endfor %}
            {% endfor %}
        </div>
        {% endif %}

        <div class="form-box">
            <h2>Profile</h2>

            <div class="form-group">
                <input type="text" name="username" value="{{ form.instance.username }}" placeholder="Username">
            </div>

            <div class="form-group">
                <input type="email" name="email" value="{{ form.instance.email }}" placeholder="Email">
            </div>

            <div class="form-group">
                <input type="tel" name="phone_number" value="{{ form.instance.phone_number }}" placeholder="Phone Number">
            </div>

            <div class="form-group">
                <input type="text" name="address" value="{{ form.instance.address }}" placeholder="Address">
            </div>

            <button type="submit" class="register-btn">Update Profile</button>
        </div>
    </form>

    <!-- CHANGE PASSWORD -->
    <p class="member-text">
        <a href="{% url 'change_password' %}">Change Password</a>
    </p>

    <!-- LOGOUT (SEPARATE FORM â€“ VERY IMPORTANT) -->
    <form method="post" action="{% url 'logout' %}">
        {% csrf_token %}
        <button type="submit" class="member-text btn btn-link">
            Logout
        </button>
    </form>

    <p class="member-text">
        Go back to <a href="{% url 'home' %}">Home</a>
    </p>

</div>
{% endblock %}
